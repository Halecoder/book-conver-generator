(this["webpackJsonpbook-conver-generator"]=this["webpackJsonpbook-conver-generator"]||[]).push([[0],{100:function(t,e){},104:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(22),l=n.n(r),s=(n(90),n(40)),o=n(41),c=n(53),h=n(51),u=(n(91),n(37)),d=n(30),b=n(80),v=n(6),g=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(s.a)(this,n),(i=e.call(this,t)).colorA="#B149FF",i.colorB="#00ffff",window.onload=function(){i.props.changeColor(i.colorA,i.colorB)},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=document.getElementById("color-a"),n=document.getElementById("color-b"),i=e.value,a=n.value,r=document.getElementById("hexTextA"),l=document.getElementById("hexTextB"),s=document.getElementById("generate");r.innerHTML=i,l.innerHTML=a,e.addEventListener("input",(function(i){r.innerHTML=e.value,t.props.changeColor(e.value,n.value)}),!1),n.addEventListener("input",(function(i){l.innerHTML=n.value,t.props.changeColor(e.value,n.value)}),!1),s.addEventListener("click",(function(i){e.value=t.randomColorGenerator(),n.value=t.randomColorGenerator(),t.props.changeColor(e.value,n.value)}))}},{key:"randomColorGenerator",value:function(){for(var t=["a","b","c","d","e","f",0,1,2,3,4,5,6,7,8,9],e=[],n=0;n<6;n++){var i=Math.floor(Math.random()*t.length);e.push(t[i])}return"#".concat(e.join(""))}},{key:"changeAlpha",value:function(t){var e=document.getElementById("color-a"),n=document.getElementById("color-b"),i=this.hexToRgb(e.value),a=this.hexToRgb(n.value);document.getElementById("color-range").innerHTML="".concat(t.target.value,"%"),this.props.changeColor("rgba(".concat(i.r,", ").concat(i.g,", ").concat(i.b,", ").concat(t.target.value,"%)"),"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(t.target.value,"%)"))}},{key:"hexToRgb",value:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}}},{key:"render",value:function(){return Object(v.jsxs)(u.a,{gutter:[8,8],children:[Object(v.jsx)(d.a,{span:12,children:Object(v.jsxs)("form",{children:[Object(v.jsx)("input",{type:"color",id:"color-a",style:{width:"100%"},value:this.colorA}),Object(v.jsx)("p",{id:"hexTextA"})]})}),Object(v.jsx)(d.a,{span:12,children:Object(v.jsxs)("form",{children:[Object(v.jsx)("input",{type:"color",id:"color-b",style:{width:"100%"},value:this.colorB}),Object(v.jsx)("p",{id:"hexTextB"})]})}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)(b.a,{id:"generate",block:!0,children:"\u968f\u673a\u80cc\u666f\u8272"})}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)("form",{children:Object(v.jsxs)(u.a,{gutter:[4,4],justify:"center",align:"middle",children:[Object(v.jsxs)(d.a,{span:24,children:[" Alpha ",Object(v.jsx)("span",{id:"color-range",children:"100%"})," "]}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)("input",{type:"range",id:"alpha",style:{width:"100%"},onChange:this.changeAlpha.bind(this),min:"60",max:"100",defaultValue:100})})]})})})]})}}]),n}(i.Component),j=n(19),f=n(75),p=n(109),x=n(108),O=n(107),y=n(111),m=n(112),k=n(113),T=n(114),C=(p.a.TextArea,function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(s.a)(this,n),(i=e.call(this,t)).canvas=new j.fabric.Canvas("canvas"),i.width=396,i.height=560,i.fontColor="white",i.title=void 0,i.subTitle=void 0,i.description=void 0,i.blob=void 0,i.background=void 0,i.illustration=void 0,i.illustrationList=[{name:"bird",path:"/assets/images/illustration/bird.svg"},{name:"bird-1",path:"/assets/images/illustration/bird-1.svg"}],i.state={textAlign:"center",filterIllustration:""},i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.renderCanvas()}},{key:"renderCanvas",value:function(){this.canvas=new j.fabric.Canvas("canvas"),j.fabric.Object.prototype.transparentCorners=!1,j.fabric.Object.prototype.originX=j.fabric.Object.prototype.originY="center",this.renderBackground("grey","grey"),this.renderLogo(),this.renderTitle(),this.renderSubTitle(),this.renderDescription(),this.renderRandomBlob();var t=this.illustrationList[Math.floor(Math.random()*this.illustrationList.length)];this.renderIllustration(t.path),this.canvas.renderAll()}},{key:"renderBackground",value:function(t,e){this.background&&this.canvas.remove(this.background),this.background=new j.fabric.Rect({fill:"#f55",top:this.height/2,left:this.width/2,width:396,height:560,selectable:!1});var n=new j.fabric.Gradient({type:"linear",coords:{x1:0,y1:0,x2:this.canvas.width,y2:this.canvas.height},colorStops:[{color:t,offset:"0"},{color:e,offset:"1"}]});this.background.fill=n,this.canvas.add(this.background),this.background.sendToBack(),this.canvas.renderAll()}},{key:"renderRandomBlob",value:function(){var t=this;this.blob&&this.canvas.remove(this.blob);var e=f.svg({seed:Math.random(),extraPoints:4,randomness:3,size:256},{fill:"rgba(255,255,255,0.1)",stroke:"none",strokeWidth:4});j.fabric.loadSVGFromString(e,(function(e,n){t.blob=j.fabric.util.groupSVGElements(e,n),t.blob.set({top:t.height/2,left:10,originX:"center",originY:"top",selectable:!1}),t.canvas.centerObjectH(t.blob),t.canvas.add(t.blob.scale(1)),t.canvas.renderAll()}))}},{key:"renderIllustration",value:function(t){var e=this;this.illustration&&this.canvas.remove(this.illustration),j.fabric.loadSVGFromURL(t,(function(t,n){e.illustration=j.fabric.util.groupSVGElements(t,n),e.illustration.set({top:e.height/2,left:e.width-140,originX:"center",originY:"top",selectable:!1}),e.canvas.centerObjectH(e.illustration),e.canvas.add(e.illustration.scale(.3)),e.canvas.renderAll()}))}},{key:"renderLogo",value:function(){var t=this;j.fabric.loadSVGFromURL("/assets/images/logo-fill.svg",(function(e,n){var i=j.fabric.util.groupSVGElements(e,n);i.set({top:10,left:10,originX:"left",originY:"top",selectable:!1}),t.canvas.add(i.scale(.07)),t.canvas.renderAll()}))}},{key:"changeTitle",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=this.title)||void 0===t||t.set({text:e.target.value}),this.canvas.renderAll()}},{key:"renderTitle",value:function(){this.title=new j.fabric.Text("Book Title",{fontSize:32,originX:"center",originY:"center",top:80,fill:this.fontColor,textAlign:"center",selectable:!1}),this.canvas.centerObjectH(this.title),this.canvas.add(this.title)}},{key:"changeSubTitle",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=this.subTitle)||void 0===t||t.set({text:e.target.value}),this.canvas.renderAll()}},{key:"renderSubTitle",value:function(){this.subTitle=new j.fabric.Text("Book SubTitle",{fontSize:22,originX:"center",originY:"center",top:120,fill:this.fontColor,selectable:!1}),this.canvas.centerObjectH(this.subTitle),this.canvas.add(this.subTitle)}},{key:"changeDescription",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===(t=this.description)||void 0===t||t.set({text:e.target.value}),this.canvas.renderAll()}},{key:"renderDescription",value:function(){this.description=new j.fabric.Text("Description",{fontSize:16,originX:"center",originY:"center",top:this.height-20,fill:this.fontColor,selectable:!1}),this.canvas.centerObjectH(this.description),this.canvas.add(this.description)}},{key:"filterIllustration",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({filterIllustration:t.target.value})}},{key:"renderIllustrationBox",value:function(){var t=this,e=[];return this.illustrationList.forEach((function(n){t.state.filterIllustration&&t.state.filterIllustration.length?n.name.search(t.state.filterIllustration)>-1&&e.push(Object(v.jsx)(d.a,{span:6,children:Object(v.jsxs)(x.a,{hoverable:!0,style:{width:"100%"},children:[Object(v.jsx)(O.a,{onClick:function(){return t.renderIllustration(n.path)},preview:!1,width:"100%",src:n.path}),Object(v.jsx)(b.a,{block:!0,type:"text",onClick:function(){return t.renderIllustration(n.path)},children:n.name})]})})):e.push(Object(v.jsx)(d.a,{span:6,children:Object(v.jsxs)(x.a,{hoverable:!0,style:{width:"100%"},children:[Object(v.jsx)(O.a,{onClick:function(){return t.renderIllustration(n.path)},preview:!1,width:"100%",src:n.path}),Object(v.jsx)(b.a,{block:!0,type:"text",onClick:function(){return t.renderIllustration(n.path)},children:n.name})]})}))})),e}},{key:"changeColor",value:function(t){var e,n,i,a=t.target;"SPAN"===a.tagName&&(a=t.target.parentElement),"white"===a.style.color?a.style.color="black":a.style.color="white",this.fontColor=a.style.color,null===(e=this.title)||void 0===e||e.set({fill:this.fontColor}),null===(n=this.subTitle)||void 0===n||n.set({fill:this.fontColor}),null===(i=this.description)||void 0===i||i.set({fill:this.fontColor}),this.canvas.renderAll()}},{key:"changeTextAlign",value:function(t){var e,n,i,a,r,l;switch(this.setState({textAlign:t.target.value}),t.target.value){case"left":null===(e=this.title)||void 0===e||e.set({textAlign:t.target.value,originX:t.target.value,left:65}),null===(n=this.subTitle)||void 0===n||n.set({textAlign:t.target.value,originX:t.target.value,left:65});break;case"center":null===(i=this.title)||void 0===i||i.set({textAlign:t.target.value,originX:t.target.value}),null===(a=this.subTitle)||void 0===a||a.set({textAlign:t.target.value,originX:t.target.value}),this.title&&this.subTitle&&(this.canvas.centerObjectH(this.title),this.canvas.centerObjectH(this.subTitle));break;case"right":null===(r=this.title)||void 0===r||r.set({textAlign:t.target.value,originX:t.target.value,left:this.width-65}),null===(l=this.subTitle)||void 0===l||l.set({textAlign:t.target.value,originX:t.target.value,left:this.width-65})}this.canvas.renderAll()}},{key:"saveCover",value:function(){var t=document.createElement("a");t.href=this.canvas.toDataURL({format:"jpeg"}),t.download="cover",t.click()}},{key:"render",value:function(){return Object(v.jsx)("div",{id:"main",style:{marginTop:"5vh"},children:Object(v.jsxs)(u.a,{gutter:16,children:[Object(v.jsx)(d.a,{span:8,children:Object(v.jsxs)(u.a,{gutter:[8,16],children:[Object(v.jsx)("canvas",{id:"canvas",width:this.width,height:this.height}),Object(v.jsx)(b.a,{type:"primary",onClick:this.saveCover.bind(this),style:{width:"100%"},children:"\u4fdd\u5b58\u5b58\u56fe\u7247"})]})}),Object(v.jsx)(d.a,{span:16,children:Object(v.jsxs)(u.a,{gutter:[16,16],children:[Object(v.jsx)(d.a,{span:24,children:Object(v.jsxs)(u.a,{gutter:8,children:[Object(v.jsx)(d.a,{span:16,children:Object(v.jsx)(p.a,{placeholder:"\u6807\u9898",defaultValue:"Book Title",onChange:this.changeTitle.bind(this)})}),Object(v.jsx)(d.a,{span:8,children:Object(v.jsxs)(u.a,{justify:"end",gutter:8,children:[Object(v.jsx)(d.a,{children:Object(v.jsx)(b.a,{type:"primary",onClick:this.changeColor.bind(this),style:{color:"white"},children:"\u5b57\u4f53\u989c\u8272"})}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(y.a.Group,{value:this.state.textAlign,onChange:this.changeTextAlign.bind(this),children:[Object(v.jsx)(y.a.Button,{value:"left",children:Object(v.jsx)(m.a,{})}),Object(v.jsx)(y.a.Button,{value:"center",children:Object(v.jsx)(k.a,{})}),Object(v.jsx)(y.a.Button,{value:"right",children:Object(v.jsx)(T.a,{})})]})})]})})]})}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)(p.a,{placeholder:"\u526f\u6807\u9898",defaultValue:"Book SubTitle",onChange:this.changeSubTitle.bind(this)})}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)(p.a,{placeholder:"\u63cf\u8ff0",defaultValue:"Description",onChange:this.changeDescription.bind(this)})}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)(x.a,{title:"\u9009\u62e9\u63d2\u753b",extra:Object(v.jsxs)(u.a,{gutter:8,children:[Object(v.jsx)(d.a,{children:Object(v.jsx)(b.a,{onClick:this.renderRandomBlob.bind(this),children:"\u66f4\u6362\u80cc\u666f"})}),Object(v.jsx)(d.a,{children:Object(v.jsx)(p.a,{style:{width:"500px"},placeholder:"\u7b5b\u9009\u63d2\u753b",onChange:this.filterIllustration.bind(this)})})]}),children:Object(v.jsx)(u.a,{gutter:[8,8],style:{height:"300px",overflowY:"scroll"},children:this.renderIllustrationBox()})})}),Object(v.jsx)(d.a,{span:24,children:Object(v.jsx)(x.a,{title:"\u8bbe\u7f6e\u80cc\u666f",children:Object(v.jsx)(g,{changeColor:this.renderBackground.bind(this)})})})]})})]})})}}]),n}(i.Component)),w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,l=e.getTTFB;n(t),i(t),a(t),r(t),l(t)}))};l.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root")),w()},90:function(t,e,n){},91:function(t,e,n){},98:function(t,e){},99:function(t,e){}},[[104,1,2]]]);
//# sourceMappingURL=main.109a7ab0.chunk.js.map